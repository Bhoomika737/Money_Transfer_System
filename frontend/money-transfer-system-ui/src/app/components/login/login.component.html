<div class="login-container">
  <div class="login-header">
    

  </div>

  <div class="login-content">
    <mat-card class="login-card">
      <div class="login-icon">
        <mat-icon>lock</mat-icon>
      </div>

      <h2>Welcome Back</h2>
      <p class="subtitle">Sign in to your account to continue</p>

      <form (ngSubmit)="login()" #loginForm="ngForm" class="login-form">
        <!-- Account ID Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Account ID</mat-label>
          <input 
            matInput 
            [(ngModel)]="accountId" 
            name="accountId"
            placeholder="Enter your account ID"
            type="text"
            required
            [pattern]="accountIdPattern"
            #accountIdCtrl="ngModel">
          <mat-icon matPrefix>account_circle</mat-icon>
          <mat-error *ngIf="accountIdCtrl.invalid && accountIdCtrl.touched">
            Account ID must start with letters and end with numbers (e.g. ACC001).
          </mat-error>
        </mat-form-field>

        <!-- Password Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Password</mat-label>
          <input 
            matInput 
            [(ngModel)]="password" 
            name="password"
            [type]="hidePassword ? 'password' : 'text'"
            placeholder="Enter your password"
            required
            [pattern]="passwordPattern"
            #passwordCtrl="ngModel">
          <mat-icon matPrefix>lock</mat-icon>
          <button 
            mat-icon-button 
            matSuffix 
            type="button"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hidePassword">
            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="passwordCtrl.invalid && passwordCtrl.touched">
            Password must include letters, numbers, a special symbol, and be at least 5 characters long.
          </mat-error>
        </mat-form-field>

        <!-- CAPTCHA Section -->
        <div class="captcha-section">
          <label>Verify you're human</label>
          <div class="captcha-container">
            <div class="captcha-code">{{ captchaCode }}</div>
            <button 
              type="button" 
              mat-icon-button 
              class="refresh-btn"
              (click)="generateCaptcha()"
              matTooltip="Generate new captcha">
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
        </div>

        <!-- CAPTCHA Input -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Enter Captcha Code</mat-label>
          <input 
            matInput 
            [(ngModel)]="captchaInput" 
            name="captchaInput"
            placeholder="Type the code above"
            required>
          <mat-icon matPrefix>verified_user</mat-icon>
        </mat-form-field>

        <!-- Remember Me -->
        <div class="remember-section">
          <mat-checkbox [(ngModel)]="rememberMe" name="rememberMe">
            Remember me on this device
          </mat-checkbox>
        </div>

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="error-box">
          <mat-icon>error</mat-icon>
          <span>{{ errorMessage }}</span>
        </div>

        <!-- Login Button -->
        <button 
          mat-raised-button 
          color="primary" 
          type="submit" 
          class="login-btn"
          [disabled]="isLoading || loginForm.invalid">
          <span *ngIf="!isLoading">
            <mat-icon>login</mat-icon>Login
          </span>
          <mat-spinner *ngIf="isLoading" diameter="24"></mat-spinner>
        </button>
      </form>

      <div class="footer-text">
        <p>Demo credentials: Account ID: ACC001, Password: Pass123</p>
      </div>
    </mat-card>
  </div>
</div>
